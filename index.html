<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alma Linux Config</title>
    <style>

        pre {
            background-color: #f0f0f0;
            color: #101010;
            padding: 1px;
            border: 1px solid #ccc;
            overflow: auto;
        }

        body {
            /* Color de letra #6C5EB5 */
            color: #6C5EB5;
            /* Color de fondo #1F1166 */
            background-color: #1F1166;
        }

    </style>
</head>
<body>
    <style>
        /* CSS for table cell background colors */
        .cell1 {
            background-color: #ff9999; /* Light red */
            color: black;
            text-align: justify;
        }

        .cell2 {
            background-color: #99ff99; /* Light green */
            color: black;
            text-align: justify;
        }

        .cell3 {
            background-color: #9999ff; /* Light blue */
            color: black;
            text-align: justify;
        }

        .cell4 {
            background-color: #ffff99; /* Yellow */
            color: black;
            text-align: justify;
        }

        .cell5 {
            background-color: #999999; /* Gray */
            color: black;
            text-align: justify;
        }
    </style>

    <h1>Particionado del disco</h1>

    <table border="9">
        <thead>
            <tr>
                <th class="cell5">Mount Point</th>
                <th class="cell5">Size</th>
                <th class="cell5">File System Format</th>
                <th class="cell5">Partition Type</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="cell1">/boot</td>
                <td class="cell1">1GiB</td>
                <td class="cell1">ext4</td>
                <td class="cell1">Standartd Partition</td>
            </tr>
            <tr>
                <td class="cell4">/tmp</td>
                <td class="cell4">3GiB</td>
                <td class="cell4">ext4</td>
                <td class="cell4">Standard Partition</td>
            </tr>
            <tr>
                <td class="cell1">swap</td>
                <td class="cell1">2GiB</td>
                <td class="cell1">swap</td>
                <td class="cell1">Standard Partition</td>
                
            </tr>
            <tr>
                <td class="cell4">BIOS BOOT</td>
                <td class="cell4">+2MiB</td>
                <td class="cell4">BIOS Boot</td>
                <td class="cell4">Standard Partition</td>
            </tr>
            <!-- Add more rows as needed -->
        </tbody>
    </table>

    <h1>Configuraciones de AlmaLinux Post-Rackeo</h1>
    
    <h2>1. Configuración de red</h2>
    <p>Tenemos a nuestra disposición al menos dos maneras de configurar nuestra red en un sistema AlmaLinux, pero lo primero es identificar cual es el adaptador de red que tenemos conectado.<br>
    Para esto, nos valdremos del siguiente comando:</p>
	 <!-- Comando de red -->
    <pre><code>
       ip a
    </code></pre>

    <p>Ya sea antes de que termines de configurar la red o si ya terminaste, no olvides emitir el ticket a NSO para que configuren el switch y el puerto por el cual este equipo resolverá de<br>
    manera pública. Recuerda por lo mismo tenerle asignado en perfíl de DNA un puerto y Switch al equipo para que redes no cometa error alguno.</p>
    <!-- Método A-->
    <h2>Método A)</h2>

    <li>En cuanto el sistema AlmaLinux arranca, podemos mediante este comando acceder a configurar el adaptador de red designado:</li>

    <pre><code>
    	nmtui
    </code></pre>

    <li>Buscaremos el adaptador de red que sabemos que vamos a operar, configuraremos sus IPs añadiendo el netmask en un formato de diagonal, por ejemplo: 143.255.58.146/29. Como este médio para <br>
    	configurar no cuenta con un apartado para "NetMask", lo haremos de la manera en que se menciona en el ejemplo, también buscaremos marcar la casilla "Activar automáticamente", también activaremos <br>
    (si no se hizo), manualmente nosotros este adaptador de red, no olvidaremos desactivar el método de conexión IPV6.</li>

    <!-- Método B -->
    <h2>Método B)</h2>

    <li>Tras haber ientificado el adaptador de red a usar, nos vamos a dirigir a modificar manualmente su configuración por la ruta de archivo de esta manera:</li>

    <pre><code>
    	nano /etc/sysconfig/network-scripts/ifcfg-eno1
    </code></pre>

    <li>En el ejemplo mencionado, el adaptador de red es "eno1", aunque también pudiera ser otro según el sistema en que opere o variación de configuraciones que tengan predefinidos los adaptadores de red.<br>
    	Nos encontraremos con un texto a modificar y buscaremos que coincida con la configuración de red que requerimos, no olvides dejar "ONBOOT" configurado como "yes" para que el adaptador de red arranque<br>
    automáticamente al iniciar el equipo. A continuación se muestra un recudaro con el bloque de configuración que nos interesa editar:</li>

    <pre><code>
    	DEVICE=eth0
        BOOTPROTO=static
        ONBOOT=yes
        TYPE=Ethernet
        NAME=eth0
        IPADDR=192.168.1.100
        NETMASK=255.255.255.0
        GATEWAY=192.168.1.1
        DNS1=8.8.8.8
        DNS2=8.8.4.4
    </code></pre>

	<!-- Paso 2 -->

    <h2>2. Aseguramiento</h2>

    <p>En cuanto logremos resolver a la red, podremos hacer el resto mediante SSH, lo primero será actualizar nuestro sistema mediante el siguiente comando:</p>

    <pre><code>
    	yum update
    </code></pre>

    <p>La importancia de esto, es que se instalará SELinux (Security Enhanced Linux), el cual nos va a servir para configuraciones importantes de firewall del sistema.</p>

    <!-- Paso 3 -->

    <h2>3. Configuración de puertos SSH</h2>

    <p>Por seguridad, usaremos otro puerto en vez del standard para acceder mediante SSH al server que estamos configurando. Para esto, usaremos el siguiente comando:</p>

    <pre><code>
    	nano /etc/ssh/sshd_config
    </code></pre>

    <p>Simplemente buscaremos la linea en que dice "#port 22", borraremos el signo # y cambiaremos 22 por 1157. De este modo, el daemon que rige la conectividad SSH ahora operará con este puerto.</p>
    <p>Ahora toca configurar el firewall para permitir coenctividad a través de este puerto, ingresaremos el siguiente comando para ello:</p>

    <pre><code>
    	firewall-cmd --permanent --zone=public --add-port=1157/tcp
    </code></pre>

    <p>Y a continuación recargaremos los firewalls para que entre en vigor esta regla, con el siguiente comando:</p>

    <pre><code>
    	firewall-cmd --reload
    </code></pre>

    <p>Aún con toda esta configuración, el daemon no va a dar como válido el puerto 1157 para conectividad SSH, seguirá siendo el 22, para cambiar esto, recuriremos al manejo de SELinux,<br>
    usaremos por lo tanto el siguiente comando</p>

    <pre><code>
    	semanage port -a -t ssh_port_t -p tcp 1157
    </code></pre>

    <!-- Paso 3.a -->

    <h3>3.a En caso de no tener "semanage":</h3>

    <p>Si el caso es tal, instalaremos entonces las utilidades que nos permiten hacer uso de "semanage". El comando es el siguiente</p>

    <pre><code>
        yum install policycoreutils-python-utils
    </code></pre>

    <p>Hecho esto, el daemon ya debería poder aceptar la nueva configuración, por lo que reiniciaremos su servicio con:</p>

    <pre><code>
    	systemctl restart sshd
    </code></pre>
    
    
</body>
</html>
